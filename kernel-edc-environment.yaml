name: kernel-edc
channels:
  - conda-forge
  - defaults
dependencies:
  # platform basic requirement
  - ipykernel

  # from jupyter/scipy-notebook
  - altair
  - 'beautifulsoup4'
  - 'conda-forge::blas=*=openblas'
  - 'bokeh'
  - 'bottleneck'
  - 'cloudpickle'
  - 'cython'
  - 'dask'
  - 'dill'
  - 'h5py'
  - 'ipywidgets'
  # we don't install ipympl here because it would also need
  # packages in the server env with additional dependencies
  # and there doesn't seem to be sufficient reason for that
  - 'matplotlib-base'
  - 'numba'
  - 'numexpr'
  - 'pandas'
  - 'patsy'
  - 'protobuf'
  - 'pytables'
  - 'scikit-image'
  - 'scikit-learn'
  - 'scipy'
  - 'seaborn'
  - 'sqlalchemy'
  - 'statsmodels'
  - 'sympy'
  - 'xlrd'
  # widgetnbextensions belongs to the jupyter env, not the kernel

  # edc platform
  - pyyaml
  - setuptools
  - cmake
  - cffi
  - python-dotenv
  - oauthlib
  - requests-oauthlib
  - gdal
  - fiona
  - rasterio
  - shapely
  - xarray
  - zarr
  - psycopg2
  - geopandas
  - geojson
  - jupyterlab-geojson
  - ipyleaflet
  - cartopy
  - tqdm
  - lightgbm
  - graphviz
  - numba
  - llvmlite
  - descartes
  - nbdime
  - papermill
  - s3fs
  - netcdf4
  - scrapbook
  - pip
  - rioxarray  # useful for notebook jobs

  - xcube==0.8.2
  - xcube-sh==0.8.1
  - xcube_geodb==1.0.0
  - xcube-cci==0.8.1
  - xcube-cds==0.8.1
  - nc-time-axis

  # rhea group
  - addict
  - yapf
  - lxml


  # we delay the upgrade to python 3.9 for consistency with the gpu image
  # and general afraidness
  - python<3.9


  # NOTE: there can only be 1 pip block in a conda env
  - pip:
    # edc
    - git+https://github.com/eurodatacube/papermill-kubernetes-job-progess@1d0490d7df0d9e987a6baec4fa5e7d3cf3c3df63

    # NOTE: it's probably ok to update these further in the future
    - eo-learn==0.9.1  # available on conda, but not latest version
    - sentinelhub==3.2.1  # available on conda, but not latest version
    - s2cloudless==1.5.0  # available on conda, but not latest version

    # rhea group
    - wget

